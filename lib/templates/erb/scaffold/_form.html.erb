<%%= form_for(@<%= singular_table_name %>, :html => {:class => "form-horizontal"}) do |f| %>

<%% if @<%= singular_table_name %>.errors.any? %>
<div id="error_explanation">
  <h2><%%= pluralize(@<%= singular_table_name %>.errors.count, "error") %> prohibited this <%= singular_table_name %>
    from being saved:</h2>

  <ul>
    <%% @<%= singular_table_name %>.errors.full_messages.each do |msg| %>
    <li><%%= msg %></li>
    <%% end %>
  </ul>
</div>
<%% end %>


<fieldset>
  <legend><%%= legend_text %></legend>
  <%- attributes.each do |attribute| -%>
  <div class="control-group">
    <%%= f.label :<%= attribute.name %>, :class => "control-label" %>
    <div class="controls">
      <!-- TODO: need to map types better -->
      <%%= f.<%= attribute.reference? ? :association : :text_field %> :<%= attribute.name %>, :class => "input-xlarge" %>
      <p class="help-block"></p>
    </div>
  </div>
  <%- end -%>

  <div class="form-actions">
    <%%= f.submit "Save changes", {:class => "btn btn-primary"} %>
    <%%= f.submit "Cancel", {:class => "btn", :name => :cancel} %>
  </div>
</fieldset>
<%% end %>